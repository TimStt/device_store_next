(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{6276:function(r,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return e(7437)}])},7437:function(r,t,e){"use strict";e.r(t),e.d(t,{default:function(){return U}});var o=e(5893),s=e(7294),n=e(6870),i=e.n(n),a=e(1664),_=e.n(a),l=e(1816),c=e(2883),u=e.n(c),p=e(5121),d=e(2418),h=e(3454);let m=async r=>{let{email:t,password:e,username:o}=r,s=h.env.NEXT_PUBLIC_API_URL+"/users";try{let{data:r}=await p.Z.get("".concat(s));if(r.find(r=>r.email===t))return"Такой пользователь есть!";let{data:n}=await p.Z.post(s,{email:t,username:o,password:await (0,d.hash)(e,12)});return n}catch(r){if(p.Z.isAxiosError(r))throw console.error("error message: ",r.message),Error(r.message);throw console.log("unexpected error: ",r),Error("Возникла непредвиденная ошибка")}},x=async r=>{let{user:t,setLoading:e}=r;try{return e(!0),await m(t)}catch(r){console.log(r.message)}finally{e(!1)}};var w=e(9558),j=e(1163);let f=()=>{let[r,t]=(0,s.useState)(!1),e=(0,j.useRouter)();return{onSubmit:async r=>{console.log("register res");let o=await x({user:r,setLoading:t});(0,w.M)({result:{ok:!!o,error:"string"==typeof o&&o,url:"/login"},router:e,textSuccessfullyToast:"Вы успешно зарегистрировались в системе"})},isLoading:r}};var N=e(3171),g=()=>{let{isLoading:r}=f();return(0,o.jsx)("button",{className:u().root,type:"submit",children:r?(0,o.jsx)(N.Z,{size:10,strokeWidth:2}):"Зарегистрироваться"})},k=e(898),v=e(2355),b=e(7364),Z=e(7836),E=e(194),y=e.n(E),I=e(3967),C=e.n(I),F=r=>{let{hasErrorInput:t,textError:e,className:s,...n}=r;return(0,o.jsx)(b.Z,{className:C()(s,y().root),icon:(0,o.jsx)(Z.Z,{className:y().root__icon,size:24}),type:"email",hasErrorInput:t,placeholder:"Ваша почта",classNameInnerBlock:y().root__inner_block,...n,children:t&&(0,o.jsx)(v.Z,{textError:e})})},A=e(5268),B=e(1109),P=e.n(B);let S=()=>({initialValues:{email:"",password:"",cpassword:"",username:""},hasError:(r,t,e)=>!!r[e]&&!!t[e]});var T=e(5066),z=r=>{let t={},{email:e,password:o,cpassword:s}=r;return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(t.email="Недействительный домен почты"),o.length<6?t.password="Пароль должен содержать не менее 6 символов":o.length>12&&(t.password="Пароль должен содержать не более 12 символов"),s&&o!==s&&(t={...t,password:"Пароли не совпадают",cpassword:"Пароли не совпадают"}),Object.entries(r).forEach(r=>{let[e,o]=r;o||(t={...t,[e]:"Обязательное поле"}),o.includes(" ")&&(t={...t,[e]:"Уберите пробелы"})}),t},L=()=>{let{initialValues:r,hasError:t}=S(),{onSubmit:e}=f();return(0,o.jsx)(T.J9,{validate:z,initialValues:r,onSubmit:e,children:r=>{let{handleSubmit:e,errors:s,touched:n,getFieldProps:i}=r;return(0,o.jsxs)("form",{className:P().root,onSubmit:e,children:[(0,o.jsx)(A.Z,{className:P().root__input_block,hasErrorInput:t(s,n,"username"),textError:s.username,...i("username")}),(0,o.jsx)(F,{className:P().root__input_block,hasErrorInput:t(s,n,"email"),textError:s.email,...i("email")}),(0,o.jsx)(k.Z,{className:P().root__input_block,hasErrorInput:t(s,n,"password"),textError:s.password,...i("password")}),(0,o.jsx)(k.Z,{className:P().root__input_block,hasErrorInput:t(s,n,"cpassword"),textError:s.cpassword,placeholder:"Повторите секретный пароль",...i("cpassword")}),(0,o.jsx)(g,{})]})}})},U=()=>{let r="Регистрация";return(0,o.jsx)(l.Z,{title:r,children:(0,o.jsxs)("section",{className:i().root,children:[(0,o.jsxs)("div",{className:i().root__title,children:[(0,o.jsx)("h1",{children:r}),(0,o.jsx)("p",{children:"Для удобства использования нашей платформы, зарегистрируйтесь!"})]}),(0,o.jsx)(L,{}),(0,o.jsxs)("span",{className:i().root__not_register,children:["Уже есть аккаунт? ",(0,o.jsx)(_(),{href:"/login",children:" Войти"})]})]})})}},2355:function(r,t,e){"use strict";var o=e(5893);e(7294);var s=e(5811),n=e.n(s);t.Z=r=>{let{textError:t}=r;return(0,o.jsx)("span",{className:n().errors,children:t})}},7364:function(r,t,e){"use strict";var o=e(5893),s=e(7294),n=e(3967),i=e.n(n),a=e(7484),_=e.n(a);let l=(0,s.forwardRef)((r,t)=>{let{children:e,classnameBlock:s,classnameInput:n,icon:a,className:l,labelElement:c,hasErrorInput:u,classNameInnerBlock:p,...d}=r;return(0,o.jsxs)("div",{className:i()(_().root,s,{[_().invalid]:u,[_().iconNone]:!a}),children:[a?(0,o.jsxs)("div",{className:i()(_().root__inner,p),children:[c,(0,o.jsx)("input",{className:l,ref:t,...d}),a]}):(0,o.jsxs)(o.Fragment,{children:[c,(0,o.jsx)("input",{ref:t,...d})]}),e]})});l.displayName="InputGroup",t.Z=l},898:function(r,t,e){"use strict";e.d(t,{Z:function(){return h}});var o=e(5893),s=e(2355),n=e(7364),i=e(7294),a=e(5586),_=e.n(a),l=e(3967),c=e.n(l),u=e(7233),p=e(3980);let d=()=>{let[r,t]=(0,i.useState)(!0);return[r,e=>r?(0,o.jsx)(u.Z,{className:e,onClick:()=>t(!1)}):(0,o.jsx)(p.Z,{className:e,onClick:()=>t(!0)})]};var h=r=>{let{hasErrorInput:t,textError:e,className:i,placeholder:a,...l}=r,[u,p]=d();return(0,o.jsx)(n.Z,{className:c()(_().root,i,{[_().invalid]:t}),icon:(0,o.jsxs)(o.Fragment,{children:[p(_().root__eye),(0,o.jsx)("span",{className:_().root__smile,children:" "})]}),classNameInnerBlock:_().root__inner_block,type:u?"password":"text",placeholder:a||"Секретный пароль",pattern:".{6,}",hasErrorInput:t,...l,children:t&&(0,o.jsx)(s.Z,{textError:e})})}},5268:function(r,t,e){"use strict";var o=e(5893),s=e(2355),n=e(7364),i=e(718),a=e(7294),_=e(3585),l=e.n(_),c=e(3967),u=e.n(c);let p=(0,a.memo)(r=>{let{hasErrorInput:t,textError:e,className:a,..._}=r;return console.log("InputUserName",_.value),(0,o.jsx)(n.Z,{className:u()(l().root,a),icon:(0,o.jsx)(i.Z,{className:l().root__icon,size:24}),classnameBlock:l().root__input_block,type:"text",hasErrorInput:t,placeholder:"Введите свое имя",classNameInnerBlock:l().root__inner_block,..._,children:t&&(0,o.jsx)(s.Z,{textError:e})})});p.displayName="InputUserName",t.Z=p},1816:function(r,t,e){"use strict";var o=e(5893),s=e(9008),n=e.n(s);e(7294);var i=e(2534),a=e.n(i),_=e(5675),l=e.n(_),c=e(3967),u=e.n(c);t.Z=r=>{let{children:t,title:e}=r;return(0,o.jsxs)("div",{className:a().background,children:[(0,o.jsx)(n(),{children:(0,o.jsx)("title",{children:e||"Авторизация"})}),(0,o.jsxs)("article",{className:u()(a().window,"container"),children:[(0,o.jsx)("div",{className:a().img,children:(0,o.jsx)(l(),{src:"/shopAuth.png",alt:"девушка с сумками продуктов",width:"200",height:"200",objectFit:"contain"})}),(0,o.jsx)("div",{className:a().auth,children:t})]})]})}},3171:function(r,t,e){"use strict";var o=e(5893),s=e(714),n=e.n(s),i=e(3967),a=e.n(i);t.Z=r=>{let{size:t,strokeWidth:e=6,className:s}=r,i=t/2;return(0,o.jsx)("svg",{className:a()(n().root,s),viewBox:"0 0 ".concat(t," ").concat(t),xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"transparent",children:(0,o.jsx)("circle",{className:n().root__path,stroke:"inherit",strokeWidth:e,strokeLinecap:"round",cx:i,cy:i,r:i})})}},9558:function(r,t,e){"use strict";e.d(t,{M:function(){return s}});var o=e(6501);let s=r=>{let{result:t,router:e,textSuccessfullyToast:s}=r;if(t.ok){o.ZP.success(s),e.push(t.url);return}o.ZP.error("Ошибка авторизации. Попробуйте еще раз")}},5811:function(r){r.exports={errors:"_errorAuth_errors__nQUrt"}},194:function(r){r.exports={root__inner_block:"input-email_root__inner_block__xsca0",root__icon:"input-email_root__icon__mqCF5"}},7484:function(r){r.exports={root:"input-group_root__bCqPx",iconNone:"input-group_iconNone__c0tTw",invalid:"input-group_invalid__P1cn5"}},5586:function(r){r.exports={root__inner_block:"input-password_root__inner_block__wrRTd",root__smile:"input-password_root__smile__srfFo",root__eye:"input-password_root__eye__FNFIx",root:"input-password_root__vmKLg",invalid:"input-password_invalid__BhoG3"}},3585:function(r){r.exports={root__inner_block:"input-username_root__inner_block__Bqz9c",root__icon:"input-username_root__icon__rrnyi"}},2534:function(r){r.exports={background:"layout-auth_background__5KuQu",window:"layout-auth_window__eDrY_",img:"layout-auth_img__LxpSc",auth:"layout-auth_auth__i_rCD"}},6870:function(r){r.exports={root:"register_root__YCn7U",root__title:"register_root__title__0DlG0",root__not_register:"register_root__not_register__hYsLz"}},1109:function(r){r.exports={root:"form-register_root__rziYY"}},2883:function(r){r.exports={root:"submit-register_root__VOis4"}},714:function(r){r.exports={root:"spinner_root__bTm2b",rotator:"spinner_rotator__JW5KF",root__path:"spinner_root__path__Hl9xr",dash:"spinner_dash__k9eFl",colors:"spinner_colors__pVAZV"}}},function(r){r.O(0,[714,66,279,888,774,179],function(){return r(r.s=6276)}),_N_E=r.O()}]);